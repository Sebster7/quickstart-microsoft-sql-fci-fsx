This Quick Start implements a highly available environment that includes Windows Server and SQL Server (MSSQL) running on Amazon Elastic Compute Cloud (EC2). It uses MSSQL https://docs.microsoft.com/en-us/sql/sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server?view=sql-server-ver15[Always On failover cluster instances^] (FCIs) and Amazon FSx as a network share for user database storage.

The Quick Start requires shared storage that is accessible by all nodes within the cluster. It supports SQL Server 2019 running on Windows Server 2019.

This architecture uses a highly-available Multi-AZ Amazon FSx file system as the network share used to store MSSQL database files. Both the FSx file system and EC2 Windows instances that host this architecture's nodes are joined to the same Active Directory (AD) domain.

The automation in this deployment uses AWS Systems Manager Automation, AWS CloudFormation, and Windows PowerShell Desired State Configuration (DSC) to deploy a multi-node SQL Always On failover instance cluster. A prerequisite for deploying a MSSQL Always On FCI is Windows Server Failover Clustering. MSSQL uses WSFC to increase application availability. WSFC provides infrastructure features that complement the high-availability and disaster-recovery scenarios supported in the AWS Cloud.

FCI, which was introduced with SQL Server 2008 as a high-availability feature, continues to be available in all newer versions of MSSQL. When used on premises, SQL Server FCI is often used purely for high availability within a single data center. On AWS, you can use the {partner-product-short-name} Quick Start to cover both high-availability and disaster-recovery requirements.

Since this architecture requires shared storage, FCIs traditionally had to be deployed within a single data center. On AWS, the shared storage can span multiple Availability Zones, enabling FCI clusters to span multiple Availability Zones.

Implementing WSFC on AWS is similar to deploying it on premises as long as you meet these two requirements:

* The cluster nodes are deployed inside a virtual private cloud (VPC).
* The cluster nodes are deployed in separate subnets to provide high availability across multiple Availability Zones.

This Quick Start provides an automated deployment with Amazon FSx as shared storage using WSFC that meets these requirements.
